<!DOCTYPE html>
<html lang=en dir="ltr">
<head>
  <title>H2H Sorter</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="tree.js"></script>
  <script src="sets.js"></script>
</head>

<body>
  <div class="header"> H2H Sorter </div>
  <br>
  <div id="setup">
      <label for="setChoice">Choose a set to sort:</label>
      <select id="setChoice" onchange="checkCustom()">
        <option value="nbaplayers">Top NBA Players</option>
        <option value="nbateams">NBA Teams</option>
        <option value="fruits">Common Fruits</option>
        <option value="custom">Custom Set</option>
      </select>
      <div id="customListDiv" style="display: none;">
        <p> Please enter your custom set below. Each element should be seperated with a comma.</p>
        <textarea name="customList" rows="9" cols="50"></textarea>
      </div>
      <br>
      <br>
      <button type="button" onclick="start()">Start Sorting!</button>
  </div>

  <div id="sorter" style="display: none;">
    <div></div>
    <button id="option0" type="button" onclick="chose(0)">Option 0</button> vs. <button id="option1" type="button" onclick="chose(1)">Option 1</button>
  </div>

  <br>

  <div class="footer"> Â© 2020 MarcerCyoon; All Rights Reserved</div>
</body>

<script>
var set = [];
var tree = [];
var topNode = 0;
// Always start with index 0 and 1 of tree array
var currentNodes = [0, 1];
var setLength = 0;

function checkCustom() {
  var opt = document.getElementById("setChoice").value;
  var changeDiv = document.getElementById("customListDiv");
  if (opt == "custom") {
    changeDiv.style.display = "block";
  } else {
    changeDiv.style.display = "none";
  }
}

function start() {
  document.getElementById("setup").style.display = "none";

  var opt = document.getElementById("setChoice").value;

  if (opt == "nbaplayers") {
    set = nbaPlayersSet;
  } else if (opt == "nbateams") {
    set = nbaTeamsSet;
  } else if (opt == "fruits") {
    set = fruitsSet;
  } else {
    // Custom List Support TBA
  }

  setLength = set.length;

  for (var i = 0; i < 2; i += 1) {
    var choice = getRandomInt(0, setLength);
    console.log("Random Value: " + choice);
    const choiceValue = set[choice];
    var node = new Node(choiceValue);
    tree.push(node);
    set.splice(choice, 1);
    var button = document.getElementById("option" + i);
    button.innerHTML = choiceValue;
  }

  document.getElementById("sorter").style.display = "block";
}

function chose(num) {
  if (num == 1) {
    tree[currentNodes[1]].add_child(tree[topNode]);
    topNode = currentNodes[1];
    currentNodes[0] = currentNodes[1];
  } else {
    tree[topNode].add_child(tree[currentNodes[1]]);
  }

  var choice = getRandomInt(0, set.length);
  console.log("Random Value: " + choice);
  const choiceValue = set[choice];
  var node = new Node(choiceValue);
  tree.push(node);
  set.splice(choice, 1);

  // Math.abs(num - 1) makes it so if choice was 1, it returns 0, and vice versa
  document.getElementById("option" +  Math.abs(num - 1)).innerHTML = choiceValue;
  console.log(tree.length);
  printTree(tree);
}

function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
   // The maximum is exclusive and the minimum is inclusive
  return Math.floor(Math.random() * (max - min)) + min;
}

</script>
